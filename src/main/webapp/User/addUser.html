<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="../Css/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="../Css/bootstrap-responsive.css" />
    <link rel="stylesheet" type="text/css" href="../Css/style.css" />
    <script type="text/javascript" src="../Js/jquery.js"></script>
    <script type="text/javascript" src="../Js/bootstrap.js"></script>
    <script type="text/javascript" src="../Js/ckform.js"></script>
    <script type="text/javascript" src="../Js/common.js"></script>
    <script src="https://cdn.staticfile.org/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/layer/3.5.1/layer.js"></script>

    <style type="text/css">
        body {
            padding-bottom: 40px;
        }
        .sidebar-nav {
            padding: 9px 0;
        }

        @media (max-width: 980px) {
            /* Enable use of floated navbar text */
            .navbar-text.pull-right {
                float: none;
                padding-left: 5px;
                padding-right: 5px;
            }
        }


    </style>
    <script>
    $(function () {

        let jwtToken = $.cookie("jwtToken")

		$('#backid').click(function(){
				window.location.href="index.html";
		 });

        $('#useradd-btn').click(function() {

            let r_id = $("input[name='r_id']").val();
            let u_email = $("input[name='u_email']").val();
            let u_trueName = $("input[name='u_trueName']").val();
            let u_passWord = $("input[name='u_passWord']").val();
            let u_loginName = $("input[name='u_loginName']").val();
            let u_state = $("input[name='u_state']:checked").val();

            layer.load(0)
            $.ajax({
                type: "POST",
                url: "/user",
                data: {jwtToken:jwtToken,r_id:r_id,u_email:u_email,u_trueName:u_trueName,
                    u_passWord:u_passWord,u_loginName:u_loginName,u_state:u_state},
                dataType: "json",
                // xhrFields: {
                //     withCredentials: true
                // },
                // crossDomain: true,
                success: function (data) {
                    layer.closeAll()
                    if (data.code == 201){
                        layer.msg("添加成功")
                        setTimeout(function () {
                            window.location.href = "index.html";
                        },500)
                    }else{
                        layer.msg(data.msg,function(){})
                    }
                }
            })
        })
    })
</script>
</head>
<body>
<form action="/user" method="post" class="definewidth m20">
    <table class="table table-bordered table-hover definewidth m10">
        <tr>
            <td width="10%" class="tableleft">登录名</td>
            <td><input type="text" name="u_loginName"/></td>
        </tr>
        <tr>
            <td class="tableleft">密码</td>
            <td><input type="password" name="u_passWord"/></td>
        </tr>
        <tr>
            <td class="tableleft">真实姓名</td>
            <td><input type="text" name="u_trueName"/></td>
        </tr>
        <tr>
            <td class="tableleft">邮箱</td>
            <td><input type="text" name="u_email"/></td>
        </tr>
        <tr>
            <td class="tableleft">状态</td>
            <td>
                <input type="radio" name="u_state" value="0" checked/> 启用
              <input type="radio" name="u_state" value="1" /> 禁用
            </td>
        </tr>
        <tr>
            <td class="tableleft">角色</td>
            <td>
            	<select name="r_id">
        			<option value="">--请选择--
        			<option value="1">管理员
        			<option value="2">院长
            		<option value="3">医生护士
       			 </select>
        	</td>
        </tr>
        <tr>
            <td class="tableleft"></td>
            <td>
                <button id="useradd-btn" class="btn btn-primary" type="button">添加</button>&nbsp;&nbsp;<button type="button" class="btn btn-success" name="backid" id="backid">返回列表</button>
            </td>
        </tr>
    </table>
</form>
</body>
</html>